apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: example-cache-storage
namePrefix: example-cache-

commonLabels:
  app: example-cache-provisioner

resources:
- ../../deploy

patchesStrategicMerge:
- provisioner-patch.yaml

patchesJson6902:
- target:
    version: v1
    kind: Namespace
    name: local-path-storage
  path: namespace-patch.yaml
- target:
    group: storage.k8s.io
    version: v1
    kind: StorageClass
    name: local-path
  path: storageclass-patch.yaml

configMapGenerator:
- name: local-path-config
  namespace: local-path-storage
  behavior: merge
  files:
  - config/config.json
  - config/helper-pod.yaml
  - config/setup
  - config/teardown

generatorOptions:
  disableNameSuffixHash: true
